/**
 * D&D 5e Spell Database
 * Common spells from cantrips to level 3
 */

import type { Spell, DndClass, SpellSchool, SpellLevel } from '@/types/spells'

export const SPELLS: Spell[] = [
  // Cantrips
  {
    id: 'fire-bolt',
    name: 'Fire Bolt',
    level: 0,
    school: 'evocation',
    castingTime: '1 action',
    range: { type: 'feet', distance: 120 },
    components: ['V', 'S'],
    duration: 'Instantaneous',
    concentration: false,
    ritual: false,
    description: 'You hurl a mote of fire at a creature or object within range. Make a ranged spell attack against the target. On a hit, the target takes 1d10 fire damage.',
    higherLevels: 'This spell\'s damage increases by 1d10 when you reach 5th level (2d10), 11th level (3d10), and 17th level (4d10).',
    classes: ['Sorcerer', 'Wizard'],
    damageType: 'fire',
    damageDice: '1d10',
    attackRoll: true,
  },
  {
    id: 'light',
    name: 'Light',
    level: 0,
    school: 'evocation',
    castingTime: '1 action',
    range: 'Touch',
    components: ['V', 'M'],
    materialComponent: 'a firefly or phosphorescent moss',
    duration: { type: 'hours', count: 1 },
    concentration: false,
    ritual: false,
    description: 'You touch one object that is no larger than 10 feet in any dimension. The object sheds bright light in a 20-foot radius and dim light for an additional 20 feet.',
    classes: ['Bard', 'Cleric', 'Sorcerer', 'Wizard'],
  },
  {
    id: 'sacred-flame',
    name: 'Sacred Flame',
    level: 0,
    school: 'evocation',
    castingTime: '1 action',
    range: { type: 'feet', distance: 60 },
    components: ['V', 'S'],
    duration: 'Instantaneous',
    concentration: false,
    ritual: false,
    description: 'Flame-like radiance descends on a creature that you can see within range. The target must succeed on a Dexterity saving throw or take 1d8 radiant damage.',
    classes: ['Cleric'],
    damageType: 'radiant',
    damageDice: '1d8',
    savingThrow: 'DEX',
  },
  {
    id: 'eldritch-blast',
    name: 'Eldritch Blast',
    level: 0,
    school: 'evocation',
    castingTime: '1 action',
    range: { type: 'feet', distance: 120 },
    components: ['V', 'S'],
    duration: 'Instantaneous',
    concentration: false,
    ritual: false,
    description: 'A beam of crackling energy streaks toward a creature within range. Make a ranged spell attack against the target. On a hit, the target takes 1d10 force damage.',
    classes: ['Warlock'],
    damageType: 'force',
    damageDice: '1d10',
    attackRoll: true,
  },

  // 1st Level
  {
    id: 'magic-missile',
    name: 'Magic Missile',
    level: 1,
    school: 'evocation',
    castingTime: '1 action',
    range: { type: 'feet', distance: 120 },
    components: ['V', 'S'],
    duration: 'Instantaneous',
    concentration: false,
    ritual: false,
    description: 'You create three glowing darts of magical force. Each dart hits a creature and deals 1d4+1 force damage.',
    higherLevels: 'When you cast this spell using a spell slot of 2nd level or higher, the spell creates one more dart for each slot level above 1st.',
    classes: ['Sorcerer', 'Wizard'],
    damageType: 'force',
    damageDice: '1d4+1',
    damagePerLevel: 1,
  },
  {
    id: 'shield',
    name: 'Shield',
    level: 1,
    school: 'abjuration',
    castingTime: '1 reaction',
    range: 'Self',
    components: ['V', 'S'],
    duration: { type: 'rounds', count: 1 },
    concentration: false,
    ritual: false,
    description: 'An invisible barrier of magical force appears and protects you. You have a +5 bonus to AC until the start of your next turn.',
    classes: ['Sorcerer', 'Wizard'],
  },
  {
    id: 'cure-wounds',
    name: 'Cure Wounds',
    level: 1,
    school: 'evocation',
    castingTime: '1 action',
    range: 'Touch',
    components: ['V', 'S'],
    duration: 'Instantaneous',
    concentration: false,
    ritual: false,
    description: 'A creature you touch regains a number of hit points equal to 1d8 + your spellcasting ability modifier.',
    higherLevels: 'When you cast this spell using a spell slot of 2nd level or higher, the healing increases by 1d8 for each slot level above 1st.',
    classes: ['Bard', 'Cleric', 'Druid', 'Paladin', 'Ranger'],
    healingDice: '1d8',
    healingPerLevel: 1,
  },
  {
    id: 'healing-word',
    name: 'Healing Word',
    level: 1,
    school: 'evocation',
    castingTime: '1 bonus action',
    range: { type: 'feet', distance: 60 },
    components: ['V'],
    duration: 'Instantaneous',
    concentration: false,
    ritual: false,
    description: 'A creature of your choice that you can see within range regains hit points equal to 1d4 + your spellcasting ability modifier.',
    classes: ['Bard', 'Cleric', 'Druid'],
    healingDice: '1d4',
    healingPerLevel: 1,
  },
  {
    id: 'bless',
    name: 'Bless',
    level: 1,
    school: 'enchantment',
    castingTime: '1 action',
    range: { type: 'feet', distance: 30 },
    components: ['V', 'S', 'M'],
    materialComponent: 'a sprinkling of holy water',
    duration: { type: 'minutes', count: 1, concentration: true },
    concentration: true,
    ritual: false,
    description: 'You bless up to three creatures. Whenever a target makes an attack roll or saving throw before the spell ends, the target can roll a d4 and add the number rolled.',
    classes: ['Cleric', 'Paladin'],
  },

  // 2nd Level
  {
    id: 'scorching-ray',
    name: 'Scorching Ray',
    level: 2,
    school: 'evocation',
    castingTime: '1 action',
    range: { type: 'feet', distance: 120 },
    components: ['V', 'S'],
    duration: 'Instantaneous',
    concentration: false,
    ritual: false,
    description: 'You create three rays of fire and hurl them at targets within range. Make a ranged spell attack for each ray. On a hit, the target takes 2d6 fire damage.',
    classes: ['Sorcerer', 'Wizard'],
    damageType: 'fire',
    damageDice: '2d6',
    attackRoll: true,
  },
  {
    id: 'hold-person',
    name: 'Hold Person',
    level: 2,
    school: 'enchantment',
    castingTime: '1 action',
    range: { type: 'feet', distance: 60 },
    components: ['V', 'S', 'M'],
    materialComponent: 'a small piece of iron',
    duration: { type: 'minutes', count: 1, concentration: true },
    concentration: true,
    ritual: false,
    description: 'Choose a humanoid that you can see within range. The target must succeed on a Wisdom saving throw or be paralyzed for the duration.',
    classes: ['Bard', 'Cleric', 'Druid', 'Sorcerer', 'Warlock', 'Wizard'],
    savingThrow: 'WIS',
  },
  {
    id: 'misty-step',
    name: 'Misty Step',
    level: 2,
    school: 'conjuration',
    castingTime: '1 bonus action',
    range: 'Self',
    components: ['V'],
    duration: 'Instantaneous',
    concentration: false,
    ritual: false,
    description: 'Briefly surrounded by silvery mist, you teleport up to 30 feet to an unoccupied space that you can see.',
    classes: ['Sorcerer', 'Warlock', 'Wizard'],
  },

  // 3rd Level
  {
    id: 'fireball',
    name: 'Fireball',
    level: 3,
    school: 'evocation',
    castingTime: '1 action',
    range: { type: 'feet', distance: 150 },
    components: ['V', 'S', 'M'],
    materialComponent: 'a tiny ball of bat guano and sulfur',
    duration: 'Instantaneous',
    concentration: false,
    ritual: false,
    description: 'A bright streak flashes from your pointing finger to a point you choose within range and then blossoms into an explosion of flame. Each creature in a 20-foot-radius sphere takes 8d6 fire damage.',
    higherLevels: 'When you cast this spell using a spell slot of 4th level or higher, the damage increases by 1d6 for each slot level above 3rd.',
    classes: ['Sorcerer', 'Wizard'],
    damageType: 'fire',
    damageDice: '8d6',
    damagePerLevel: 1,
    savingThrow: 'DEX',
  },
  {
    id: 'counterspell',
    name: 'Counterspell',
    level: 3,
    school: 'abjuration',
    castingTime: '1 reaction',
    range: { type: 'feet', distance: 60 },
    components: ['S'],
    duration: 'Instantaneous',
    concentration: false,
    ritual: false,
    description: 'You attempt to interrupt a creature in the process of casting a spell. If the creature is casting a spell of 3rd level or lower, its spell fails.',
    classes: ['Sorcerer', 'Warlock', 'Wizard'],
  },
  {
    id: 'revivify',
    name: 'Revivify',
    level: 3,
    school: 'necromancy',
    castingTime: '1 action',
    range: 'Touch',
    components: ['V', 'S', 'M'],
    materialComponent: 'diamonds worth 300 gp, which the spell consumes',
    duration: 'Instantaneous',
    concentration: false,
    ritual: false,
    description: 'You touch a creature that has died within the last minute. That creature returns to life with 1 hit point.',
    classes: ['Cleric', 'Paladin'],
  },
]

export function getSpellById(id: string): Spell | undefined {
  return SPELLS.find(spell => spell.id === id)
}

export function getSpellsByClass(className: DndClass): Spell[] {
  return SPELLS.filter(spell => spell.classes.includes(className))
}

export function getSpellsByLevel(level: SpellLevel): Spell[] {
  return SPELLS.filter(spell => spell.level === level)
}

export function getSpellsBySchool(school: SpellSchool): Spell[] {
  return SPELLS.filter(spell => spell.school === school)
}
